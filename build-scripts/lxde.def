#WHATIS:LXDE desktop container
Bootstrap: docker
From: ubuntu:24.04

%labels
    Author Ziyue Cheng
    Version 1.0
    Description "Ubuntu24-based container with LXDE desktop environment"

%environment
    export LC_ALL=C.UTF-8
    export LANG=C.UTF-8
    export PS1='CNT \w> '

%runscript
    exec /bin/bash "$@"	

%post
    # Avoid interactive prompts
    export DEBIAN_FRONTEND=noninteractive

    apt -y update

    # Desktop
    apt -y install lxde openbox-lxde-session

    # FireFox
    apt -y install software-properties-common
    add-apt-repository -y ppa:mozillateam/ppa
    apt -y install firefox-esr

    # vnc
    apt -y install x11vnc tigervnc-standalone-server \
        novnc xvfb xorg dbus-x11 xserver-xorg-video-dummy xpra

    apt clean

    # xorg settings
    echo "allowed_users = anybody" >> /etc/X11/Xwrapper.config
